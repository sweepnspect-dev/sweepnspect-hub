<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#12121e">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>SweepNspect Command Center</title>
  <link rel="stylesheet" href="/css/hub.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&family=Manrope:wght@400;500;600;700&family=JetBrains+Mono:ital,wght@0,400;0,500;0,600;1,400&display=swap" rel="stylesheet">
</head>
<body>
  <div id="app">
    <!-- ─── Desktop Sidebar (1400px+) ─── -->
    <nav class="sidebar" id="sidebar">
      <div class="sidebar-brand">
        <div class="brand-mark">S</div>
        <div class="brand-text">
          <span class="brand-name">SweepNspect</span>
          <span class="brand-sub">Command Center</span>
        </div>
      </div>
      <ul class="sidebar-nav" id="sidebarNav"></ul>
      <div class="sidebar-footer">
        <div class="conn-row">
          <span class="status-dot" id="sidebarDot"></span>
          <span class="conn-label" id="sidebarConnLabel">Connecting</span>
        </div>
        <div class="clauser-row" id="sidebarClauserRow">
          <span class="clauser-dot offline" id="sidebarClauserDot"></span>
          <span class="clauser-label" id="sidebarClauserLabel">Clauser: Offline</span>
        </div>
        <div class="sidebar-meta">v2.0 &middot; Black Collar</div>
      </div>
    </nav>

    <!-- ─── Icon Rail (900-1400px, Fold open) ─── -->
    <nav class="icon-rail" id="iconRail"></nav>

    <!-- ─── Main Area ─── -->
    <main class="main" id="main">
      <header class="main-header" id="mainHeader">
        <div class="header-left">
          <button class="hamburger" id="hamburger" aria-label="Toggle menu">
            <span></span><span></span><span></span>
          </button>
          <h1 class="view-title" id="viewTitle">Home</h1>
        </div>
        <div class="header-right">
          <div class="header-quick-stats" id="headerQuickStats">
            <span class="qs-item" id="qsTickets" title="Open tickets">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.5 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/></svg>
              <span id="qsTicketsVal">0</span>
            </span>
            <span class="qs-item" id="qsSubs" title="Active subscribers">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 00-3-3.87"/><path d="M16 3.13a4 4 0 010 7.75"/></svg>
              <span id="qsSubsVal">0</span>
            </span>
            <span class="qs-item qs-revenue" id="qsMrr" title="MRR">
              <span id="qsMrrVal">$0</span>
            </span>
          </div>
          <button class="header-btn" id="ttsToggle" onclick="HubTTS.toggle()" title="Voice on (click to mute)">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" id="ttsIconOn"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M19.07 4.93a10 10 0 010 14.14"/><path d="M15.54 8.46a5 5 0 010 7.07"/></svg>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" id="ttsIconOff" style="display:none"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><line x1="23" y1="9" x2="17" y2="15"/><line x1="17" y1="9" x2="23" y2="15"/></svg>
          </button>
          <button class="header-btn" id="alertTrigger" onclick="App.toggleAlertPanel()" title="Alerts">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8A6 6 0 006 8c0 7-3 9-3 9h18s-3-2-3-9"/><path d="M13.73 21a2 2 0 01-3.46 0"/></svg>
            <span class="notif-badge" id="alertBadge" style="display:none">0</span>
          </button>
          <span class="header-clock" id="headerClock"></span>
        </div>
      </header>

      <div class="view-container" id="viewContainer">
        <div class="view-loading">
          <div class="pulse-ring"></div>
        </div>
      </div>
    </main>

    <!-- ─── Bottom Tab Bar (< 900px) ─── -->
    <nav class="tab-bar" id="tabBar"></nav>
  </div>

  <!-- ─── Alert Panel (floating) ─── -->
  <div class="alert-panel" id="alertPanel" style="display:none">
    <div class="alert-panel-header">
      <h3>Alerts</h3>
      <button class="alert-panel-close" onclick="App.toggleAlertPanel()">&times;</button>
    </div>
    <div class="alert-panel-body" id="alertPanelBody">
      <div class="empty-state"><p>No alerts</p></div>
    </div>
  </div>

  <!-- ─── Mobile Menu Overlay ─── -->
  <div class="menu-overlay" id="menuOverlay"></div>

  <!-- ─── Toast Container ─── -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Libraries -->
  <script src="/js/lib/ws.js"></script>
  <script src="/js/lib/db.js"></script>
  <script src="/js/lib/notify.js"></script>
  <script src="/js/lib/tts.js"></script>
  <script src="/js/lib/stt.js"></script>
  <script src="/js/lib/ai-chat.js"></script>

  <!-- Views -->
  <script src="/js/views/home.js"></script>
  <script src="/js/views/comms.js"></script>
  <script src="/js/views/tickets.js"></script>
  <script src="/js/views/customers.js"></script>
  <script src="/js/views/revenue.js"></script>
  <script src="/js/views/tasks.js"></script>
  <script src="/js/views/analytics.js"></script>
  <script src="/js/views/marketing.js"></script>
  <script src="/js/views/chat.js"></script>
  <script src="/js/views/system.js"></script>

  <!-- App Router -->
  <script src="/js/app.js"></script>
</body>
</html>
